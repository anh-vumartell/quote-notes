(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[3],{100:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(12),o=n(14),a=n(90),s=n.n(a),u=n(2),i=function(e){return Object(u.jsxs)("figure",{className:s.a.quote,children:[Object(u.jsxs)("p",{children:['"',e.text,'"']}),Object(u.jsxs)("figcaption",{children:["by ",e.author]})]})},l=n(28),m=n(9),d=n(91),f=n.n(d),j=n(92),b=n.n(j),p=n(86),O=n(87),h=n(44),x=function(e){var t=Object(r.useRef)(),n=Object(p.a)(O.a),c=n.requestHandler,o=n.status,a=n.error,s=e.onAddedComment;Object(r.useEffect)((function(){"completed"!==o||a||s()}),[o,a,s]);var i,l=function(n){n.preventDefault();var r=t.current.value;c({commentData:r,quoteId:e.quoteId}),t.current.value=""};return"pending"===o&&(i=Object(u.jsx)(h.a,{})),Object(u.jsxs)("form",{className:b.a.form,onSubmit:l,children:[Object(u.jsxs)("div",{className:b.a.control,onSubmit:l,children:[Object(u.jsx)("label",{htmlFor:"comment",children:"Your Comment"}),Object(u.jsx)("textarea",{id:"comment",rows:"5",ref:t})]}),Object(u.jsx)("div",{className:b.a.actions,children:Object(u.jsx)("button",{className:"btn",children:"Add Comment"})}),i]})},v=n(93),g=n.n(v),w=function(e){return Object(u.jsx)("li",{className:g.a.item,children:Object(u.jsx)("p",{children:e.text})})},y=n(94),C=n.n(y),N=function(e){return Object(u.jsx)("ul",{className:C.a.comments,children:e.comments.map((function(e){return Object(u.jsx)(w,{text:e.text},e.id)}))})},_=function(){var e,t=Object(c.i)().quoteId,n=Object(r.useState)(!1),o=Object(m.a)(n,2),a=o[0],s=o[1],i=Object(p.a)(O.d),l=i.requestHandler,d=i.status,j=i.data,b=i.error,h=Object(r.useCallback)((function(){l(t)}),[l,t]);return Object(r.useEffect)((function(){l(t)}),[l,t]),"pending"!==d||b||(e=Object(u.jsxs)("div",{className:"centered",children:[Object(u.jsx)("p",{children:"Loading comments..."}),";"]})),"completed"===d&&(j||j.length>0)&&(e=Object(u.jsx)(N,{comments:j})),j&&0!==j.length||(e=Object(u.jsx)("p",{className:"centered",children:"There are no comments yet! Maybe adding one?"})),Object(u.jsxs)("section",{className:f.a.comments,children:[Object(u.jsx)("h2",{children:"User Comments"}),!a&&Object(u.jsx)("button",{className:"btn",onClick:function(){s(!0)},children:"Add a Comment"}),a&&Object(u.jsx)(x,{quoteId:t,onAddedComment:h}),e]})},k=n(95),S=n.n(k);t.default=function(e){var t=Object(r.useContext)(l.a),n=t.favorites,a=Object(c.i)().quoteId,s=Object(c.j)(),m=Object(p.a)(O.c,!0),d=m.requestHandler,f=m.status,j=m.data;return Object(r.useEffect)((function(){d(a)}),[d,a]),Object(u.jsxs)("div",{children:["pending"===f?Object(u.jsx)(h.a,{}):Object(u.jsx)(i,{text:j.text,author:j.author}),Object(u.jsx)(c.b,{path:s.path,exact:!0,children:Object(u.jsxs)("div",{className:"actions",children:[Object(u.jsx)(o.b,{className:"btn",to:"".concat(s.url,"/comments"),children:"Leave a comment"}),Object(u.jsxs)("button",{onClick:function(){n.push(j),console.log(n),t.setFavCount((function(e){return e+1})),localStorage.setItem("favQuotes",JSON.stringify(n))},className:"btn",children:[Object(u.jsx)(S.a,{})," Add Favorite"]})]})}),Object(u.jsx)(c.b,{path:"".concat(s.path,"/comments"),children:Object(u.jsx)(_,{})})]})}},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(6);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(85),c=n(21),o=n.n(c),a=n(27),s=n(9),u=n(1),i=function(e,t){switch(t.type){case"SENDING":return{data:null,error:null,status:"pending"};case"SUCCESS":return{data:t.data,error:null,status:"completed"};case"ERROR":return{data:null,error:t.errorMessage,status:"completed"};default:return e}},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(u.useReducer)(i,{status:t?"pending":null,data:null,error:null}),c=Object(s.a)(n,2),l=c[0],m=c[1],d=Object(u.useCallback)(function(){var t=Object(a.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m({type:"SENDING"}),t.prev=1,t.next=4,e(n);case 4:r=t.sent,m({type:"SUCCESS",data:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),m({type:"ERROR",errorMessage:t.t0.message||"Something went wrong!"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(r.a)({requestHandler:d},l)}},87:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return d}));var r=n(21),c=n.n(r),o=n(85),a=n(27),s="https://quote-notes-default-rtdb.europe-west1.firebasedatabase.app",u=function(){var e=Object(a.a)(c.a.mark((function e(){var t,n,r,a,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/quotes.json"));case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,t.ok){e.next=8;break}throw new Error(n.message||"Something went wrong!");case 8:for(a in r=[],n)u=Object(o.a)({id:a},n[a]),r.push(u);return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/quotes/").concat(t,".json"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(r=e.sent,n.ok){e.next=8;break}throw new Error(r.message||"Could not fetch quote.");case 8:return a=Object(o.a)({id:t},r),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(s,"/quotes.json"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent,console.log(r),n.ok){e.next=10;break}throw new Error(r.message||"Something went wrong!");case 10:return e.abrupt("return",null);case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/comments/").concat(t.quoteId,".json"),{method:"POST",body:JSON.stringify(t.commentData),header:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(r=e.sent,n.ok){e.next=8;break}throw new Error(r.message||"Could not add comment.");case 8:return e.abrupt("return",{commentId:r.name});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,o,a,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/comments/").concat(t,".json"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(r=e.sent,console.log(r),n.ok){e.next=9;break}throw new Error(r.message||"Could not get comments");case 9:for(a in o=[],r)u={id:a,text:r[a]},console.log(u),o.push(u);return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},90:function(e,t,n){e.exports={quote:"HighlightedQuote_quote__nE9T6"}},91:function(e,t,n){e.exports={comments:"Comments_comments__iZX-v"}},92:function(e,t,n){e.exports={form:"NewCommentForm_form__2Te8b",loading:"NewCommentForm_loading__2veC2",control:"NewCommentForm_control__3NVeP",actions:"NewCommentForm_actions__2fwWP"}},93:function(e,t,n){e.exports={item:"CommentItem_item__24mbD"}},94:function(e,t,n){e.exports={comments:"CommentsList_comments__valp0"}},95:function(e,t,n){"use strict";var r=n(45);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(n(46)),o=n(2),a=(0,c.default)((0,o.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite");t.default=a}}]);
//# sourceMappingURL=3.16840fd0.chunk.js.map