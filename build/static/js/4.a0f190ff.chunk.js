(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[4],{101:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(12),c=n(9),o={value:"",isTouched:!1},u=function(e,t){switch(t.type){case"INPUT":return{value:t.value,isTouched:e.isTouched};case"BLUR":return{value:e.value,isTouched:!0};case"RESET":return{value:"",isTouched:!1};default:throw new Error("Oops! Something went wrong!")}},s=function(e){var t=Object(r.useReducer)(u,o),n=Object(c.a)(t,2),a=n[0],s=n[1],i=e(a.value),l=!i&&a.isTouched;return{value:a.value,valueIsValid:i,hasError:l,inputChangeHandler:function(e){s({type:"INPUT",value:e.target.value})},inputBlurHandler:function(){s({type:"BLUR"})},inputReset:function(){s({type:"RESET"})}}},i=n(88),l=n.n(i),d=n(2),p=function(e){return Object(d.jsx)("div",{className:l.a.card,children:e.children})},f=n(44),h=n(89),j=n.n(h),b=function(e){var t=Object(r.useState)(!1),n=Object(c.a)(t,2),a=(n[0],n[1]),o=s((function(e){return""!==e.trim()})),u=o.value,i=o.valueIsValid,l=o.hasError,h=o.inputChangeHandler,b=o.inputBlurHandler,m=o.inputReset,O=s((function(e){return""!==e.trim()})),v=O.value,g=O.valueIsValid,x=O.hasError,w=O.inputChangeHandler,y=O.inputBlurHandler,S=O.inputReset,E=!1;i&&g&&(E=!0);return Object(d.jsx)(r.Fragment,{children:Object(d.jsx)(p,{children:Object(d.jsxs)("form",{onFocus:function(){a(!0)},className:j.a.form,onSubmit:function(t){if(t.preventDefault(),E){m(),S();var n={author:u,text:v,createdAt:(new Date).toDateString()};e.onAddQuote(n)}},children:[e.isLoading&&Object(d.jsx)("div",{className:j.a.loading,children:Object(d.jsx)(f.a,{})}),Object(d.jsxs)("div",{className:j.a.control,children:[Object(d.jsx)("label",{htmlFor:"author",children:"Author"}),Object(d.jsx)("input",{type:"text",id:"author",value:u,onChange:h,onBlur:b}),l&&Object(d.jsx)("p",{className:"error-text",children:"Must enter author name!"})]}),Object(d.jsxs)("div",{className:j.a.control,children:[Object(d.jsx)("label",{htmlFor:"text",children:"Text"}),Object(d.jsx)("textarea",{id:"text",rows:"5",value:v,onChange:w,onBlur:y}),x&&Object(d.jsx)("p",{className:"error-text",children:"Must enter quote here!"})]}),Object(d.jsx)("div",{className:j.a.actions,children:Object(d.jsx)("button",{onClick:function(){a(!1)},className:"btn",children:"Add Quote"})})]})})})},m=n(86),O=n(87);t.default=function(e){var t=Object(m.a)(O.e),n=t.requestHandler,c=t.status,o=Object(a.g)();return Object(r.useEffect)((function(){"completed"===c&&o.push("/all-quotes")}),[c,o]),Object(d.jsx)(b,{isLoading:"pending"===c,onAddQuote:function(e){n(e)}})}},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(6);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(85),a=n(21),c=n.n(a),o=n(27),u=n(9),s=n(1),i=function(e,t){switch(t.type){case"SENDING":return{data:null,error:null,status:"pending"};case"SUCCESS":return{data:t.data,error:null,status:"completed"};case"ERROR":return{data:null,error:t.errorMessage,status:"completed"};default:return e}},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(s.useReducer)(i,{status:t?"pending":null,data:null,error:null}),a=Object(u.a)(n,2),l=a[0],d=a[1],p=Object(s.useCallback)(function(){var t=Object(o.a)(c.a.mark((function t(n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d({type:"SENDING"}),t.prev=1,t.next=4,e(n);case 4:r=t.sent,d({type:"SUCCESS",data:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),d({type:"ERROR",errorMessage:t.t0.message||"Something went wrong!"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(r.a)({requestHandler:p},l)}},87:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return p}));var r=n(21),a=n.n(r),c=n(85),o=n(27),u="https://quote-notes-default-rtdb.europe-west1.firebasedatabase.app",s=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/quotes.json"));case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,t.ok){e.next=8;break}throw new Error(n.message||"Something went wrong!");case 8:for(o in r=[],n)s=Object(c.a)({id:o},n[o]),r.push(s);return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/quotes/").concat(t,".json"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(r=e.sent,n.ok){e.next=8;break}throw new Error(r.message||"Could not fetch quote.");case 8:return o=Object(c.a)({id:t},r),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u,"/quotes.json"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent,console.log(r),n.ok){e.next=10;break}throw new Error(r.message||"Something went wrong!");case 10:return e.abrupt("return",null);case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/comments/").concat(t.quoteId,".json"),{method:"POST",body:JSON.stringify(t.commentData),header:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(r=e.sent,n.ok){e.next=8;break}throw new Error(r.message||"Could not add comment.");case 8:return e.abrupt("return",{commentId:r.name});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,c,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/comments/").concat(t,".json"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(r=e.sent,console.log(r),n.ok){e.next=9;break}throw new Error(r.message||"Could not get comments");case 9:for(o in c=[],r)s={id:o,text:r[o]},console.log(s),c.push(s);return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},88:function(e,t,n){e.exports={card:"Card_card__2nKG4"}},89:function(e,t,n){e.exports={form:"QuoteForm_form__3Ndw9",loading:"QuoteForm_loading__iDpS0",control:"QuoteForm_control__2lCiE",actions:"QuoteForm_actions__354La"}}}]);
//# sourceMappingURL=4.a0f190ff.chunk.js.map